<!DOCTYPE html>
<html>
<head>
    <title>Plotter.Testing.ProtoChart.Benchmark</title>
    <meta name="Author" content="Akram El Assas" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9" />
    <!--[if lt IE 9]><script  type="text/javascript" src="_excanvas.js"></script><![endif]-->
    <script src="_date.format.js" type="text/javascript"></script>
    <script src="_prototype.js" type="text/javascript"></script>
    <script src="_dateformatter.js" type="text/javascript"></script>
    <script src="_ProtoChart.js" type="text/javascript"></script>
    <script type="text/javascript">
        //<![CDATA[
        function go() {
            var pointsInput = document.getElementById('points');
            var repetitionsInput = document.getElementById('repetitions');
            var msgDiv = document.getElementById('msg');
            var points = parseInt(pointsInput.value);
            var repetitions = parseInt(repetitionsInput.value);
            msgDiv.innerHTML = 'Drawing...';
            var options = { mode: 'time', xaxis: { tickFormatter: dateFormatter} };
            var curve = getCurves(points);
            var elapsedMilliseconds = 0;
            for (var i = 0; i < repetitions; i++) {
                var start = new Date();
                var graph = new Proto.Chart($('graph'), [{ label: '', data: curve}], options);
                var end = new Date();
                elapsedMilliseconds += (end - start);
            }
            elapsedMilliseconds /= repetitions;
            msgDiv.innerHTML = 'done in ' + elapsedMilliseconds + ' milliseconds';
        }
        function getCurves(points) {
            var curve = [];
            for (var i = 0; i < points; i++) {
                curve.push([new Date(i * 1000 * 3600 * 24), Math.pow(Math.random() - Math.random(), 7)]);
            }
            return curve;
        }
        //]]>
    </script>
</head>
<body>
    Number of points:
    <input type="text" id="points" value="100" />
    Repetitions
    <input type="text" id="repetitions" value="1" />
    <input type="button" id="go" value="Go" onclick="javascript:go();" />
    <div id="graph" style="height: 300px; margin: 20px; width: 790px;">
    </div>
    <br />
    <br />
    <div id="msg">
    </div>
</body>
</html>
